/* ========================================
   NAV.CSS - Estilos de Navegación
   Archivo separado con todos los estilos
   relacionados con el navbar
   ======================================== */

/* ===== NAVBAR PRINCIPAL ===== */
#mainNav {
  border-bottom-width: 1px;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease, box-shadow 0.3s ease;
}

/* ===== ESTADOS DEL NAVBAR ===== */

/* Estado TRANSPARENTE - cuando está al tope */
#mainNav.nav-transparent {
  border-bottom-color: transparent;
  opacity: 0;
  background-color: transparent;
  box-shadow: none;
  pointer-events: none;
}

#mainNav.nav-transparent #mainNavLogo {
  color: var(--color-text-light);
}

#mainNav.nav-transparent #mobile-menu-button span {
  background-color: var(--color-text-light);
}

#mainNav.nav-transparent #mainNavMenu a, 
#mainNav.nav-transparent #mobile-menu a {
  color: var(--color-chinese-seal-red);
}

#mainNav.nav-transparent #mainNavMenu a:hover, 
#mainNav.nav-transparent #mobile-menu a:hover {
  color: var(--color-chinese-seal-red-hover);
}

#mainNav.nav-transparent #mobile-menu {
  border-top-color: rgba(255, 255, 255, 0.15);
  background-color: rgba(10, 10, 10, 0.9);
}

/* Estado OPACO - cuando scrollea */
#mainNav.nav-opaque {
  border-bottom-color: var(--color-border-subtle);
  opacity: 1;
  background-color: var(--color-bg-main);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
  pointer-events: auto;
}

#mainNav.nav-opaque #mainNavLogo {
  color: var(--color-text-title);
}

#mainNav.nav-opaque #mobile-menu-button span {
  background-color: var(--color-text-main);
}

#mainNav.nav-opaque #mainNavMenu a, 
#mainNav.nav-opaque #mobile-menu a {
  color: var(--color-chinese-seal-red);
}

#mainNav.nav-opaque #mainNavMenu a:hover, 
#mainNav.nav-opaque #mobile-menu a:hover {
  color: var(--color-chinese-seal-red-hover);
}

#mainNav.nav-opaque #mobile-menu {
  border-top-color: var(--color-border-subtle);
  background-color: var(--color-bg-main);
}

/* ===== MENÚ DESKTOP ===== */
#mainNavMenu {
  align-items: center;
  gap: 1.5rem;
}

/* Ítems con submenú */
.nav-item-has-children {
  align-items: center;
  position: relative;
}

/* Texto + flecha del menú - están juntos */
.nav-item-has-children > a {
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

/* Botón flecha de submenú */
.nav-parent-btn {
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
}

/* ===== SUBMENÚS DESKTOP ===== */

/* Submenú base - posicionamiento */
.nav-submenu {
  position: absolute;
  top: calc(100% + 1.25rem);
  left: 0;
  min-width: 14rem;
  max-height: 60vh;
  overflow-y: auto;
  border: none;
  padding: 0;
  background: var(--color-bg-card);
  box-shadow: 0 4px 20px var(--color-chinese-seal-red-hover);
  border-radius: var(--radius-lg, 0.25rem);
  z-index: 1000;
  display: none;
}

/* Enlaces dentro del submenú */
.nav-submenu a {
  display: block;
  padding: 0.55rem 0.75rem;
  font-size: 0.95rem;
  color: var(--color-chinese-seal-red);
}

/* Hover en enlaces del submenú */
.nav-submenu a:hover {
  background-color: rgba(255,255,255,0.1);
}

/* ===== ESTADO ABIERTO DE SUBMENÚ ===== */

/* Cuando se abre un item con submenú - fondo rojo */
.nav-item-has-children.open {
  background-color: var(--color-chinese-seal-red);
}

.nav-item-has-children.open > a,
.nav-item-has-children.open > .nav-parent-btn {
  background-color: var(--color-chinese-seal-red);
  color: var(--color-text-light);
}

.nav-item-has-children.open > a,
.nav-item-has-children.open > .nav-parent-btn,
.nav-item-has-children.open .nav-submenu a {
  color: var(--color-text-light) !important;
}

/* Mostrar submenú cuando está abierto */
.nav-item-has-children.open > .nav-submenu {
  display: block;
  background-color: var(--color-chinese-seal-red);
}

/* Enlaces del submenú cuando está abierto */
.nav-item-has-children.open .nav-submenu a {
  color: var(--color-text-light);
}

/* Puente invisible para mantener hover sin cerrar */
.nav-item-has-children::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 0;
  height: 1.25rem;
  width: 100%;
  background: transparent;
}

/* Mostrar submenú al hover en desktop */
@media (hover:hover) {
  .nav-item-has-children:hover > .nav-submenu {
    display: block;
  }
}

/* ===== MENÚ MOBILE ===== */

/* Contenedor del menú mobile */
#mobile-menu {
  position: absolute;
  top: calc(100% + 0.25rem);
  right: 0;
  width: 14rem;
  background: var(--color-bg-card) !important;
  box-shadow: 0 4px 20px var(--color-chinese-seal-red-hover);
  border-radius: none;
  margin-top: 1.15rem;
  padding: 0.75rem 0;
  border-top: none !important;
  text-align: right;
  overflow-y: auto;
  will-change: scroll;
  max-height: calc(100vh - 3.5rem);
  -webkit-overflow-scrolling: touch;
}

/* Forzar alineación derecha de todos los elementos */
#mobile-menu * {
  text-align: right;
}

/* Enlaces y botones del menú mobile */
#mobile-menu a,
#mobile-menu .mobile-acc-btn {
  display: block;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  line-height: 1.3;
  -webkit-tap-highlight-color: rgba(0,0,0,0.06);
  text-align: right;
}

/* Botón de acordeón en mobile */
.mobile-acc-btn {
  cursor: pointer;
  background: none;
  border: none;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  width: 100%;
  text-align: right;
}

/* Paneles de acordeón mobile */
.mobile-acc-panel {
  box-sizing: border-box;
  max-height: 0;
  overflow: hidden;
  transition: max-height 240ms ease;
  padding-left: 1rem;
  padding-top: 0;
  padding-bottom: 0.4rem;
  -webkit-overflow-scrolling: touch;
}

.mobile-accordion.open .mobile-acc-panel {
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  padding-top: .35rem;
  padding-bottom: .6rem;
}

/* Prevenir que el overscroll interfiera */
.mobile-acc-panel {
  overscroll-behavior: contain;
}

/* Hover para mobile */
#mobile-menu a:hover,
.mobile-acc-btn:hover {
  background-color: rgba(0,0,0,0.05);
}

/* ===== RESPONSIVE - TABLETS/DESKTOP ===== */
@media (max-width: 1300px) {
  #mobile-menu-button {
    display: block;
  }
  #mainNavMenu {
    display: none;
  }
}

@media (min-width: 768px) {
  #mainNavMenu {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 1.5rem;
  }
}

/* ===== ICONOS DEL NAVBAR (Theme Toggle + WhatsApp) ===== */

/* ===== ICONO CAMBIO DE TEMA (THEME TOGGLE) ===== */

/* Estilos base - Botón de cambio de tema */
#theme-toggle {
  /* PADDING = Espacio interno alrededor del icono */
  /* Formato: top right bottom left */
  padding: 0.3rem 0.7rem 0.3rem 1rem;
  
  /* FONT-SIZE = Tamaño del icono */
  /* Cambiar este valor para hacer más grande o pequeño */
  font-size: 20px;
  
  border: none;
  background-color: transparent;
  cursor: pointer;
  transition: transform 0.3s ease, background-color 0.3s ease;
}

/* Icono del theme toggle */
#theme-toggle i.fas {
  color: inherit;
}

/* Color en navbar TRANSPARENTE */
#mainNav.nav-transparent #theme-toggle {
  color: var(--color-text-light);
}

/* Color en navbar OPACO */
#mainNav.nav-opaque #theme-toggle {
  color: var(--color-text-main);
}

/* Efecto hover - Theme Toggle */
#mainNav #theme-toggle:hover {
  border-radius: 0.375rem;
  background-color: rgba(128, 128, 128, 0.1);
  transform: rotate(20deg);
}

/* Focus para accesibilidad */
#theme-toggle:focus {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

/* ===== ICONO WHATSAPP ===== */

/* Estilos base - Botón de WhatsApp */
#whatsapp-nav-icon {
  /* PADDING = Espacio interno alrededor del icono */
  /* Formato: top right bottom left */
  padding: 0.3rem 0.7rem 0.3rem 1rem;
  
  /* FONT-SIZE = Tamaño del icono */
  /* Cambiar este valor para hacer más grande o pequeño */
  font-size: 20px;
  
  border: none;
  background-color: transparent;
  cursor: pointer;
  transition: color 0.3s ease, transform 0.3s ease, text-shadow 0.3s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Icono del WhatsApp */
#whatsapp-nav-icon i.fab.fa-whatsapp {
  color: inherit;
}

/* Color en navbar TRANSPARENTE */
#mainNav.nav-transparent #whatsapp-nav-icon {
  color: var(--color-text-light);
}

/* Color en navbar OPACO */
#mainNav.nav-opaque #whatsapp-nav-icon {
  color: var(--color-text-main);
}

/* Efecto hover - WhatsApp */
#mainNav #whatsapp-nav-icon:hover {
  color: #01c40b; /* Verde WhatsApp oficial */
  transform: scale(1.15);
  text-shadow: 0 0 10px rgba(1, 196, 11, 0.5);
}

/* Focus para accesibilidad */
#whatsapp-nav-icon:focus {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

/* ===== ESTILOS COMUNES PARA AMBOS ICONOS ===== */

/* Base para todos los iconos del navbar */
#theme-toggle, 
#whatsapp-nav-icon {
  text-decoration: none;
  background-color: transparent;
}

/* Color de los iconos */
#theme-toggle i.fas, 
#whatsapp-nav-icon i.fab.fa-whatsapp {
  color: inherit;
}

/* Responsive - Ajustar tamaño en mobile si es necesario */
@media (max-width: 768px) {
  #theme-toggle,
  #whatsapp-nav-icon {
    font-size: 18px;
    padding: 0.2rem 0.5rem 0.2rem 0.8rem;
  }
}

/* ========================================
   DARK MODE - Tema oscuro
   ======================================== */

/* Submenús en dark mode */
body.dark-mode .nav-submenu {
  background: var(--color-dm-bg-card);
  box-shadow: 0 4px 20px var(--color-dm-chinese-seal-red-hover);
}

body.dark-mode .nav-submenu a {
  color: var(--color-dm-chinese-seal-red);
}

body.dark-mode .nav-submenu a:hover {
  background-color: rgba(255,255,255,0.06);
}

/* Items con submenú abiertos en dark mode */
body.dark-mode .nav-item-has-children.open {
  background-color: var(--color-dm-chinese-seal-red);
}

body.dark-mode .nav-item-has-children.open > a,
body.dark-mode .nav-item-has-children.open > .nav-parent-btn {
  background-color: var(--color-dm-chinese-seal-red);
  color: var(--color-dm-text-title);
}

body.dark-mode .nav-item-has-children.open > a,
body.dark-mode .nav-item-has-children.open > .nav-parent-btn,
body.dark-mode .nav-item-has-children.open .nav-submenu a {
  color: var(--color-dm-text-title) !important;
}

body.dark-mode .nav-item-has-children.open > .nav-submenu {
  background-color: var(--color-dm-chinese-seal-red);
}

body.dark-mode .nav-item-has-children.open .nav-submenu a {
  color: var(--color-dm-text-title);
}

/* ===== SCROLL STYLING PARA SUBMENÚS LARGOS ===== */

/* Scrollbar para navegadores basados en WebKit */
.nav-submenu::-webkit-scrollbar {
  width: 6px;
}

.nav-submenu::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 3px;
}

.nav-submenu::-webkit-scrollbar-thumb {
  background: var(--color-chinese-seal-red);
  border-radius: 3px;
  opacity: 0.7;
}

.nav-submenu::-webkit-scrollbar-thumb:hover {
  background: var(--color-chinese-seal-red-hover);
  opacity: 1;
}

/* Dark mode - scrollbar styling */
body.dark-mode .nav-submenu::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

body.dark-mode .nav-submenu::-webkit-scrollbar-thumb {
  background: var(--color-dm-chinese-seal-red);
  opacity: 0.7;
}

body.dark-mode .nav-submenu::-webkit-scrollbar-thumb:hover {
  background: var(--color-dm-chinese-seal-red-hover);
  opacity: 1;
}

/* Firefox - field-sizing */
.nav-submenu {
  scrollbar-color: var(--color-chinese-seal-red) rgba(0, 0, 0, 0.05);
  scrollbar-width: thin;
}

body.dark-mode .nav-submenu {
  scrollbar-color: var(--color-dm-chinese-seal-red) rgba(255, 255, 255, 0.05);
}

/* ===== SCROLL STYLING PARA MENÚ MOBILE ===== */

/* Scrollbar para #mobile-menu - WebKit */
#mobile-menu::-webkit-scrollbar {
  width: 6px;
}

#mobile-menu::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 3px;
}

#mobile-menu::-webkit-scrollbar-thumb {
  background: var(--color-chinese-seal-red);
  border-radius: 3px;
  opacity: 0.7;
}

#mobile-menu::-webkit-scrollbar-thumb:hover {
  background: var(--color-chinese-seal-red-hover);
  opacity: 1;
}

/* Scrollbar para .mobile-acc-panel - WebKit */
.mobile-acc-panel::-webkit-scrollbar {
  width: 6px;
}

.mobile-acc-panel::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 3px;
}

.mobile-acc-panel::-webkit-scrollbar-thumb {
  background: var(--color-chinese-seal-red);
  border-radius: 3px;
  opacity: 0.7;
}

.mobile-acc-panel::-webkit-scrollbar-thumb:hover {
  background: var(--color-chinese-seal-red-hover);
  opacity: 1;
}

/* Firefox - scrollbar para mobile menu */
#mobile-menu {
  scrollbar-color: var(--color-chinese-seal-red) rgba(0, 0, 0, 0.05);
  scrollbar-width: thin;
}

.mobile-acc-panel {
  scrollbar-color: var(--color-chinese-seal-red) rgba(0, 0, 0, 0.05);
  scrollbar-width: thin;
}

/* Dark mode - scrollbar styling para mobile menu */
body.dark-mode #mobile-menu::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

body.dark-mode #mobile-menu::-webkit-scrollbar-thumb {
  background: var(--color-dm-chinese-seal-red);
  opacity: 0.7;
}

body.dark-mode #mobile-menu::-webkit-scrollbar-thumb:hover {
  background: var(--color-dm-chinese-seal-red-hover);
  opacity: 1;
}

body.dark-mode .mobile-acc-panel::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

body.dark-mode .mobile-acc-panel::-webkit-scrollbar-thumb {
  background: var(--color-dm-chinese-seal-red);
  opacity: 0.7;
}

body.dark-mode .mobile-acc-panel::-webkit-scrollbar-thumb:hover {
  background: var(--color-dm-chinese-seal-red-hover);
  opacity: 1;
}

/* Firefox dark mode */
body.dark-mode #mobile-menu {
  scrollbar-color: var(--color-dm-chinese-seal-red) rgba(255, 255, 255, 0.05);
}

body.dark-mode .mobile-acc-panel {
  scrollbar-color: var(--color-dm-chinese-seal-red) rgba(255, 255, 255, 0.05);
}

/* Menú mobile en dark mode */
body.dark-mode #mobile-menu {
  background: var(--color-dm-bg-card) !important;
  box-shadow: 0 4px 20px var(--color-dm-chinese-seal-red-hover);
}

body.dark-mode #mobile-menu a:hover,
body.dark-mode .mobile-acc-btn:hover {
  background-color: rgba(255,255,255,0.05);
}

/* ===== PREVENCIÓN DE SOLAPAMIENTO DE ANCLAS CON NAVBAR ===== */
:target {
  scroll-margin-top: 4rem;
}

html {
  scroll-behavior: smooth;
}
